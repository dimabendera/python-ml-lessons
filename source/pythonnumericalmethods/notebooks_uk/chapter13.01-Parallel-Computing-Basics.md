<h1>Основи паралельних обчислень<a href="#parallel-computing-basics" title="Permalink to this headline"></a></h1>
<p>Тепер ми маємо робочі знання Python, і незабаром почнемо використовувати його для аналізу даних та чисельного аналізу. Перш ніж заглиблюватися, нам потрібно розглянути <strong>паралельні обчислення</strong> в Python. Це означає, що ви зможете запускати свій код одночасно на кількох ядрах вашого процесора (або на кількох процесорах) або збільшити швидкість, використовуючи невикористані цикли процесора, поки ваша програма чекає на зовнішні ресурси (тобто завантаження файлів, виклики API тощо). Основна ідея паралельних обчислень полягає у виконанні кількох завдань одночасно для скорочення часу виконання вашої програми. Наступний малюнок ілюструє просту ідею паралельних обчислень у порівнянні з послідовними обчисленнями, які ми використовували досі. Наприклад, якщо у вас є 1 мільйон файлів даних і вам потрібно застосувати до кожного з них однакові операції, ви можете робити це по одному файлу за раз, або ви можете робити це з кількома файлами одночасно; або якщо ви завантажуєте 1 мільйон веб-сайтів, ви можете скористатися можливістю завантажувати 10 одночасно, щоб скоротити загальний час завантаження. Тому вивчення основ паралельних обчислень допоможе вам створювати більш ефективний код.</p>

<p>Більшість сучасних комп'ютерів використовують багатоядерну архітектуру, що означає, що на одному обчислювальному компоненті є кілька незалежних процесорних блоків, так званих ядер, які доступні для виконання різних завдань. Наприклад, на моєму ноутбуці є 1 процесор з 6 фізичними ядрами (див. наступний малюнок), кожне з цих фізичних ядер має два логічні ядра, що в сумі дає 12 ядер (дивіться наступний розділ, де ми виведемо загальну кількість ядер процесора на вашій машині).</p>
<p><img alt="Багатоядерність" src="https://raw.githubusercontent.com/dimabendera/python-ml-lessons/main/source/pythonnumericalmethods/_images/13.01.01-my-hardware.png"/></p>
<p>У Python є два основні підходи до паралельних обчислень: використання бібліотек <strong>multiprocessing</strong> або <strong>threading</strong>. Давайте спочатку розглянемо відмінності між процесом і потоком.</p>

<h2>Процес та потік<a href="#process-and-thread" title="Permalink to this headline"></a></h2>
<p><strong>Процес</strong> — це екземпляр програми (наприклад, інтерпретатор Python, Jupyter notebook тощо). Процес створюється операційною системою для запуску програми, і кожен процес має власний блок пам'яті. <strong>Потік</strong> — це підпроцес, який існує в межах процесу. Кожен процес може мати кілька потоків, і ці потоки спільно використовують один і той же блок пам'яті в межах процесу. Тому для кількох потоків в одному процесі, через спільний простір пам'яті, змінні або об'єкти є спільними. Якщо ви зміните одну змінну в одному потоці, вона зміниться для всіх інших потоків. Але в різних процесах все інакше: зміна змінної в одному процесі не змінить її в інших процесах. І процес, і потік мають свої переваги та недоліки, і їх можна використовувати в різних завданнях для максимізації переваг.</p>


<h2>Проблема GIL в Python<a href="#python-s-gil-problem" title="Permalink to this headline"></a></h2>
<p>У Python є так зване Глобальне блокування інтерпретатора (Global Interpreter Lock, GIL), яке дозволяє виконувати лише один нативний потік за раз, що запобігає одночасному виконанню кількох потоків. Це пов'язано з тим, що Python був розроблений до появи багатоядерних процесорів у персональних комп'ютерах (це показує, наскільки стара ця мова). Хоча в Python існують обхідні шляхи для багатопотокового програмування, у наступному розділі ми розглянемо лише бібліотеку multiprocessing, яку будемо використовувати найчастіше для використання переваг багатоядерних паралельних обчислень.</p>


<h2>Недоліки використання паралельних обчислень<a href="#disadvantage-of-using-parallel-computing" title="Permalink to this headline"></a></h2>
<p>Звісно, у використанні паралельних обчислень є й недоліки. Наприклад, складніший код, накладні витрати при створенні нових процесів та їх підтримці. Таким чином, якщо ваше завдання невелике, використання паралельних обчислень займе більше часу, оскільки системі потрібен час для ініціалізації нових процесів та їх підтримки.</p>
